<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ARC testing interface</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="js/common.js"></script>
    <script src="js/testing_interface.js"></script>

    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/testing_interface.css">

    <!-- <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet"> -->

  </head>
  <body>
    <div id="modal_bg">
      <div id="modal">
        <div>Welcome to the ARC testing interface. In this experiment, you will complete a series of abstract reasoning puzzles. Press the Start button to begin the tutorial. <br></div>
        <br />
        <!-- <input type="file" class="load_task"/> -->
        <button onclick="showSlides()" id="start_tutorial_btn">Start Tutorial</button>
        <button onclick="startExperiment()" id="start_experiment_btn">Start Experiment</button>

        <!-- <button onclick="firstTask()" id="random_task_btn">First task</button> -->
        <!-- <button onclick="randomTask()" id="random_task_btn">Random task</button> -->
      </div>
    </div>
    <div id="tutorial_container">
      <div class="tutorial_slide">
        <!-- <div><strong>ARC Tutorial</strong><br /><br /></div> -->
        <div> In this experiment you will see several input and output pairs, like the ones below. Each output is some transformation of the input. You can think of it like a computer program applying to the input to produce the output. <br /> </div>
        <br /><br />
        <div class="tutorial_pair">
          <img src="img/input1.png" width="200" height="200">
          <div id="computer_arrow">
            <div id="comp">
              <img src="img/comp.png" id="comp_inner" width="125" height="125">
            </div>
            <div id="arrow">
              <img src="img/arrow.png" id="arrow_inner" width="100" height="50">
            </div>
          </div>
          <img src='img/output1.png' width="200" height="200">
        </div>

        <div class="tutorial_pair">
          <img src="img/input2.png" width="200" height="200">
          <div id="computer_arrow">
            <div id="comp">
              <img src="img/comp.png" id="comp_inner" width="125" height="125">
            </div>
            <div id="arrow">
              <img src="img/arrow.png" id="arrow_inner" width="100" height="50">
            </div>
          </div>
          <img src='img/output2.png' width="200" height="200">
        </div>
      </div>
      <br><br>

      <div class="tutorial_slide">
        <!-- <div><strong>ARC Tutorial</strong><br /><br /></div> -->
        <div> You will then see a test input and blank output. You should fill in the test output with your best guess at the program that completes the pattern. We will explain how to do this below. <br /> </div>
        <br /><br>
        <div class="tutorial_pair">
          <img src="img/test.png" width="200" height="200">
          <div id="computer_arrow">
            <div id="comp">
              <img src="img/comp.png" id="comp_inner" width="125" height="125">
            </div>
            <div id="arrow">
              <img src="img/arrow.png" id="arrow_inner" width="100" height="50">
            </div>
          </div>
          <img src='img/test_output.png' width="200" height="200">
        </div>
      </div>

      <div class="tutorial_slide">
        <div> In this case the correct program was one that fills in all connected green areas with yellow. So the correct output would be: <br /> </div>
        <br /><br>

        <div class="tutorial_pair">
          <img src="img/test_correct.png" width="200" height="200">
        </div>
      </div>

      <div class="tutorial_slide">
        <div> Below is the interface you will be using. We will provide some videos on how to use each feature of the interface. <br /> </div>
        <br /><br>

        <div class="tutorial_pair">
          <img src="img/interface.png" width="1000" height="600">
        </div>
      </div>

      <div class="tutorial_slide">
        <div> The videos below will demonstrate the basic functionality of each of the tools in the interface. <br> <br> The video below demonstrates how to <strong> change the size of the grid </strong> and how to <strong> reset it back to it's original shape.</strong> It will always start as a 3x3 blank grid. <br /> </div>

        <div class="tutorial_video">
          <img src="img/h-w-reset-mouse.gif" />
        </div>
      </div>

      <div class="tutorial_slide">
        <div> The video below demonstrates how to <strong> copy the input image </strong> and how to use the <strong> edit tool.</strong> When editing, you can modify single cells in the output grid. <br /> </div>

        <div class="tutorial_video">
          <img src="img/copy-from-input-edit.gif" />
        </div>
      </div>

      <div class="tutorial_slide">
        <div> The video below demonstrates how to use the <strong> select and flood fill tools.</strong> Using select will allow you to highlight sections of the grid to fill in with a specific color. The flood fill tool will fill in connected areas with the color you choose. <br /> </div>
        <div class="tutorial_video">
          <img src="img/select-flood-fill.gif" />
        </div>
      </div>

      <div class="tutorial_slide">
        <div> The video below demonstrates how to <strong> copy and paste </strong>patterns from the input grid to the output grid. To do so you would first select the select tool, then highlight the portion of the input grid you're interested in, copy it with ctrl + c, and then paste it onto the output grid with ctrl + v. <br /> </div>
        <div class="tutorial_video">
          <img src="img/ctrl-c.gif" />
        </div>
      </div>

      <div class="tutorial_slide">
        <div> The video below demonstrates how to do the <strong> writing portion of the experiment.</strong> Once you submit either the correct answer or three incorrect answers, you will be asked to submit a short written description of your best guess at the rule that transforms the inputs to the outputs. You will then move onto the next task. <br> <br> There are ten tasks in total. You can view which task you are on and how many attempts you have used in the top bar. This area will also display whether or not your solution is correct. <br /> </div>
        <div class="tutorial_video">
          <img src="img/submit-solution.gif" />
        </div>
      </div>

      <div class="tutorial_slide">
        <div> Now that you have the tools necessary, please complete the task below. You will only be able to move onto the next stage if you do it correctly. For the tutorial task, you can try as many times as you need, however during the main experiment you will only have three attempts per task. Additionally, there is no time limit for each task.<br /> </div>
        <br />
      </div>

      <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next" onclick="plusSlides(1)">&#10095;</a>      
    </div>

    <div id="tutorial_nav" style="text-align:center">
      <span class="dot" onclick="currentSlide(1)"></span> 
      <span class="dot" onclick="currentSlide(2)"></span> 
      <span class="dot" onclick="currentSlide(3)"></span>
      <span class="dot" onclick="currentSlide(4)"></span> 
      <span class="dot" onclick="currentSlide(5)"></span> 
      <span class="dot" onclick="currentSlide(6)"></span> 
      <span class="dot" onclick="currentSlide(7)"></span> 
      <span class="dot" onclick="currentSlide(8)"></span> 
      <span class="dot" onclick="currentSlide(9)"></span> 
      <span class="dot" onclick="currentSlide(10)"></span>       
    </div>    

    <div id="workspace">
      <div id="demonstration_examples_view">
        <div class="text" id="task_demo_header">Task Demonstration</div>
        <div id="task_preview"></div>
      </div>

      <div id="evaluation_view">
        <div id="parent_load_task_control_btns">
          <div id="load_task_control_btns">
            <div class="text" id="current_task">
              <span></span>
              <div id="info_display"></div>
            </div>
          </div>
        </div>
        <div id="evaluation-input-view">
          <div class="text" id="test_input_header">Test Input</div>
          <div id="evaluation_input" class="selectable_grid"></div>
        </div>

        <div id="evaluation_output_editor">
          <div class="text" id="test_output_header">Test Output
          </div>        
          <div id="output_grid">
            <div class="edition_grid selectable_grid">
              <div class="row">
                <div class="cell" symbol="0" x="0" y="0"></div>
                <div class="cell" symbol="0" x="0" y="1"></div>
                <div class="cell" symbol="0" x="0" y="2"></div>
              </div>
              <div class="row">
                <div class="cell" symbol="0" x="1" y="0"></div>
                <div class="cell" symbol="0" x="1" y="1"></div>
                <div class="cell" symbol="0" x="1" y="2"></div>
              </div>
              <div class="row">
                <div class="cell" symbol="0" x="2" y="0"></div>
                <div class="cell" symbol="0" x="2" y="1"></div>
                <div class="cell" symbol="0" x="2" y="2"></div>
              </div>
            </div>
          </div>

          <div id="edition_view">
            <div id="write_solution" style="display: none">
              <p id="write_solution_text">Please describe your solution to this task using as many words as necessary. Your description will be passed onto another person, who will be asked to reproduce the correct answer with only the Test Input and your description provided. When you are done, please press the Submit button to continue.</p>
              <form >
                <textarea id="write_solution_box"></textarea>
              </form>
              <br />
              <!-- <button onclick="startExperiment()" id="submit_description_btn">Submit and begin the experiment</button> -->
              <button onclick="nextTask()"  id="submit_description_btn">Submit</button>
              <button onclick="finishTutorial()" id="submit_tutorial_description_btn">Submit</button>
            </div>        
            <div id="editor_grid_control_btns">
              <div id="toolbar">
                <div>
                  <label_heading for="edit" id="toolbar_heading">Select Tool</label_heading>
                  <br />
                  <input type="radio" id="tool_edit"
                         name="tool_switching" value="edit" checked>
                  <label for="tool_edit" class="tool"><strong>Edit</strong>: Modify one cell at a time</label>
                  <br />
                  <input type="radio" id="tool_select"
                         name="tool_switching" value="select">
                  <label for="tool_select" class="tool"><strong>Select</strong>: Select multiple cells to modify</label>
                  <br />
                  <input type="radio" id="tool_floodfill"
                         name="tool_switching" value="floodfill">
                  <label for="tool_floodfill" class="tool"><strong>Flood Fill</strong>: Change connected areas to another color</label>
                  <br />
                </div>
              </div>

              <label_heading for="edit" id="toolbar_heading">Select Color</label_heading>
              <br />
              <div id="symbol_picker">
                <div id = "selected_first" class="symbol_preview symbol_0 selected" symbol="0"></div>
                <div class="symbol_preview symbol_1" symbol="1"></div>
                <div class="symbol_preview symbol_2" symbol="2"></div>
                <div class="symbol_preview symbol_3" symbol="3"></div>
                <div class="symbol_preview symbol_4" symbol="4"></div>
                <div class="symbol_preview symbol_5" symbol="5"></div>
                <div class="symbol_preview symbol_6" symbol="6"></div>
                <div class="symbol_preview symbol_7" symbol="7"></div>
                <div class="symbol_preview symbol_8" symbol="8"></div>
                <div class="symbol_preview symbol_9" symbol="9"></div>
              </div>
              
              <div id="resize_control_btns">
                <label_heading for="edit" id="toolbar_heading">Grid Size</label_heading>
                <!-- <label for="output_grid_size">Change grid size: </label> -->
                <label for="height">Height</label>
                <select id="height">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3"Selected>3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="22">21</option>
                  <option value="23">23</option>
                  <option value="24">24</option>
                  <option value="25">25</option>
                </select>
                <label for="width">Width</label>
                <select id="width">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3"Selected>3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                  <option value="13">13</option>
                  <option value="14">14</option>
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                  <option value="19">19</option>
                  <option value="20">20</option>
                  <option value="22">21</option>
                  <option value="23">23</option>
                  <option value="24">24</option>
                  <option value="25">25</option>
                </select>
                <br />
              </div>

              <button onclick="copyFromInput()">Copy from Input</button>
              <button onclick="resetOutputGrid()">Reset Grid</button>
              <button onclick="showHelpModal()">Help</button>
              <button onclick="submitTutorial()" id="submit_tutorial_solution_btn">Submit</button>
              <button onclick="submitSolution()" id="submit_solution_btn">Submit</button>
            </div>
          </div> 
        </div>
      </div>
    </div>

    <div id="tutorial_quiz">
      <div class="tutorial_text">
        <div><strong>Finall, before you begin the main experiment, we have a few more questions to check your understanding of the task. You will need to answer them all correctly in order to continue.</strong></div>
      </div>

      <div class="tutorial_text">
        <div><strong>Are any of the tasks timed?</strong></div><br />
        <form>
          <div>
            <input type="radio" id="yes" name="y/n" value="yes"
                   checked>
            <label for="yes">Yes</label>

            <input type="radio" id="no" name="y/n" value="no">
            <label for="no">No</label>
          </div>
        </form>
      </div>

      <div class="tutorial_text">
        <div><strong>How many attempts do you have before you will be moved onto the next task?</strong></div>
        <div>
          <br />
          <label for="attempts_question">Number of attempts:</label>
          <select id="attempts_question">
            <option value="1"Selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>
      </div>

      <div class="tutorial_text">
        <div><strong>How many tasks are there?</strong></div>
        <div>
          <br />
          <label for="tasks_question">Number of tasks:</label>
          <select id="tasks_question">
            <option value="1"Selected>1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

      </div>
      <div class="tutorial_text">
        <button onclick="evalAnswers()" id="tutorial_quiz_btn">Submit</button>
      </div>

      <div id="incorrect_submission">
        <div>One or more answers were incorrect, please try again.</div>
      </div> 

      <div id="correct_submission">
        <div>You have correctly answered all of the questions! You will now begin the experiment.</div>
      </div>
    </div>

    <div id="experiment_finish">
      <div class="tutorial_text">
        <div><strong>Congratulations, you have completed the experiment!</strong></div>
      </div>
    </div>
  </body>

  <div id="help_modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close">&times;</span>
        <h3>ARC Instructions</h3>
      </div>
      <div class="modal-body">
        <p>In this experiment, we are looking at your ability to solve abstract reasoning puzzles. On the left in the <strong>Task Demonstration</strong> panel, there are a limited number of <strong>Example Input</strong> and <strong>Example output</strong> pairs for the current task. Your goal is to determine what the underlying rule is based on these pairs, and apply it to a new <strong>Test Input</strong> to produce the correct <strong>Test Output</strong>. For each task, you will have three attempts to submit your response before moving onto the next task, and there are ten tasks in total. You have as much time as necessary to solve each task.</p>
        <p>To solve each task, there are a number of different tools you can use:</p>
        <ul>
          <li>The <strong>Edit</strong> tool lets you edit each cell one by one by clicking on each cell separately. You can also click and drag your mouse down to edit multiple cells one by one.</li>
          <li>The <strong>Select</strong> tool lets you edit multiple cells at the same time. Click and drag to select a rectangular block of cells, which will now be shaded. Then you can change the color of all of the selected cells by selecting a different color in the <strong>Select Color</strong> palette. Alternatively, you can <strong>Copy</strong> the cells by first pressing C, and <strong>Paste</strong> the cells in another location by selecting a single cell and pressing V.</li>
          <li>The <strong>Flood Fill</strong> tool is like a paint bucket, it will fill in any connected cells (of the same color) to the one you click on with the same new color. To use this, first select the color you want using the <strong>Select Color</strong> palette, and click on a single cell with this tool.</li>

        <li>The current color is indicated by the color with an orange border in the <strong>Select Color</strong> palette. Clicking on another color will change the current color.</li>
          <li>To change the height or width of the <strong>Test Output</strong>, click on their respective dropdown menus to select the new height or width in the <strong>Grid Size</strong> options.</li>
        </ul>
        <p>There are a few additional buttons at the bottom that provide additional functionality:</p>
        <ul>
          <li>The <strong>Copy from Input</strong> button will copy the current <strong>Test Input</strong> to the <strong>Test Output</strong>.</li>
          <li>In case you want to start from scratch, the <strong>Reset</strong> button will clear the current <strong>Test Output</strong> grid to a blank 3x3 grid.</li>
          <li>If you want to read these instructions at a later time, press the <Strong>Help</Strong> button again.</li>
        </ul>
        <p>Finally, if you think you have the correct output, press the <strong>Submit</strong> button! You have three attempts to get each task right.</p>
      </div>      
    </div>
  </div>
</div>  
</html>
